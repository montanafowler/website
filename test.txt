var checkedElements = new Array();
                    var count = 0;
                    
                    // new way of getting checked elements
                    // need to call this code whenever a checkbox is clicked!
                    var checkboxIds = new Array();
                    // checkboxIds.append("written_checkbox_unchecked_abstraction2");
                    // var srcImageName;
                    // for(var i = 0; i < checkboxIds.length; i++) {
                    //   srcImageName = document.getElementById(checkboxIds[i]).getAttribute("src");
                    
                    //   if (!srcImageName.includes("unchecked")) {
                    //     if (checkboxIds[i].includes("abstraction")) {
                    //       checkedElements.append("abstraction");
                    //     } else if (checkboxIds[i].includes("representation")) {
                    //       checkedElements.append("representation");
                    //     } else if (checkboxIds[i].includes("nature")) {
                    //       checkedElements.append("nature");
                    //     } else if (checkboxIds[i].includes("exhibitions")) {
                    //       checkedElements.append("exhibitions");
                    //     } else if (checkboxIds[i].includes("portraiture")) {
                    //       checkedElements.append("portraiture");
                    //     }
                    //   }
                    // }
                    
                    console.log("checkedElements");
                    console.log(checkedElements);
                    
                    // var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    //     console.log(parseInt(value));
                    //     if(parseInt(value) == NaN) {
                    //       checkedElements.push(value);
                    //     } else {
                    //       if (key.includes("_checked.x")) {
                    //         console.log("checked " + key);
                    //         checkedElements.push(key.replace("_checked.x", ""));
                    //         document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("visibility", "hidden");
                    //         document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("width", "0px");
                    //         document.getElementById("written_checkbox_checked_abstraction").style.setProperty("visibility", "visible");
                    //         document.getElementById("written_checkbox_checked_abstraction").style.setProperty("width", "auto");
                    //       }
                    //     }
                        
                    //     count++;
                    // });
                    
                    console.log("count " + count);
                    console.log("checkedElements " + checkedElements);
                    var yearFilter = "2017_to_present";
                    
                    // if count is zero, none were checked so show all
                    if(count == 0) {
                      checkedElements = ["abstraction", "exhibitions", "nature", "portraiture", "representation", "2017_to_present"];
                    } 
                    
                    var justYearFilter = count == 1 && checkedElements[0] != "abstraction" && checkedElements[0] != "exhibitions" && checkedElements[0] != "nature" && checkedElements[0] != "portraiture" && checkedElements[0] != "representation";
                    
                    // if the year is the only filter, add everything to that filter
                    if(justYearFilter) {
                      console.log("just year filter");
                      var temp = checkedElements[0];
                      checkedElements = ["abstraction", "exhibitions", "nature", "portraiture", "representation", temp];
                      yearFilter = temp;
                    
                    } else if (count != 0) {
                      for(i = 0; i < checkedElements.length; i++) {
                        // if it isn't a theme element & its a year
                        if(checkedElements[i] != "abstraction" && checkedElements[i] != "exhibitions" 
                          && checkedElements[i] != "nature" && checkedElements[i] != "portraiture" 
                          && checkedElements[i] != "representation") {
                          yearFilter = checkedElements[i];
                          break;
                        }
                      }
                    }
                    
                    console.log("YEAR FILTER +++++++++++ " + yearFilter);
                    var allImages = makeAllArray();
                    
                    
                    var photosToDisplay = allImages;
                    allImages = shuffleArray(allImages);
                    // allImages = filterNewerForward(allImages);
                    
                    // make the first page not have so many photos so it loads faster
                    if(count == 0 && yearFilter == "2017_to_present") {
                      allImages = allImages.slice(0, 16);
                    }
                    
                    photosToDisplay = allImages;
                    
                    console.log("about to call make section");
                    makeSection("", allImages);
                    
                    var allText = getText(checkedElements);
                    console.log("done calling allText");
                    
                    //filterNewerFoward(allImages);
                    
                    // console.log(allText);
                    
                    
                    // console.log("checkedElements " + checkedElements);
                    
                    // var photosToDisplay = new Array();
                    
                    
                    // var tempSectionTitle = ""
                    // var tempArray = new Array();
                    // console.log("checkedElements.length " + checkedElements.length);
                    var index = 0;
                    // var i = 0;
                     while(index < checkedElements.length) {
                    //   console.log("index " + index + " checkedElements[index] " + checkedElements[index]);
                    //   tempArray = shuffleArray(makeArray(checkedElements[index]));
                    //   photosToDisplay = photosToDisplay.concat(tempArray);
                    //   tempSectionTitle += checkedElements[index] + " ";
                      console.log("checked elements #" + index + " " + checkedElements[index]);
                      if(count > 0 && !justYearFilter) {
                        // if the element is a theme not a year filter
                        if(checkedElements[index] == "abstraction" || checkedElements[index] == "exhibitions" || checkedElements[index] == "nature" || checkedElements[index] == "portraiture" || checkedElements[index] == "representation") {
                            //document.getElementById(checkedElements[index] + "Checkbox").checked = true;
                            console.log("setting visibility in checked loop");
                            document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("visibility", "hidden");
                            document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("width", "0px");
                            document.getElementById("written_checkbox_checked_abstraction").style.setProperty("visibility", "visible");
                            document.getElementById("written_checkbox_checked_abstraction").style.setProperty("width", "auto");
                            console.log("checked image: ");
                            console.log(document.getElementById("written_checkbox_checked_abstraction"));
                    
                        } else {
                          // year filter
                    
                          console.log("year filter!" + checkedElements[index]);
                          document.getElementById("yearFilterDropdown").value = checkedElements[index];
                        }
                      }
                    
                      if(justYearFilter) {
                        console.log("just year filter!" + checkedElements[index]);
                          document.getElementById("yearFilterDropdown").value = checkedElements[index];
                      }
                       index++;
                      
                     }
                    
                    // photosToDisplay = shuffleArray(photosToDisplay);
                    
                    // // make the first page not have so many photos so it loads faster
                    // if(count == 0) {
                    //   photosToDisplay = photosToDisplay.slice(0, photosToDisplay.length / 6);
                    // }
                    
                    // makeSection(tempSectionTitle, photosToDisplay);
                    