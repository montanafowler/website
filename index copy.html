<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <h1 hidden="true">MONTANA FOWLER</h1>
  <img src="/Users/montana/Documents/Fun/website/images/written_words/new_title_vectorized.png" id="title_image"/>
  <meta name="author" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="css/responsiveGallery.css" rel="stylesheet">
  <!-- <link href="css/style.css" rel="stylesheet"> -->
  <script src="jquery-3.4.1.min.js"></script>
  <script type="text/javascript" srd="require.js"></script>
  <script type="text/javascript" src="processCheckboxes.js"></script>  
  <script type="text/javascript" src="makeArrays.js"></script>

  
  </head>

  

<body>

<div class="header2">
 <img 
    class="written_filter_checkbox" 
    src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png" 
    style="visibility: visible; inline: block;"
    id="written_checkbox_unchecked_abstraction2"
    /> 

    <img 
    class="written_filter_checkbox" 
    src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png" 
    style="visibility: visible; inline: block;"
    id="written_checkbox_unchecked_representation2"
    /> 

    <!-- filter by year -->
  <select name="yearFilter2" id="yearFilterDropdown2" src="">
  <option value="2017_to_present">2017 to present</option>
  <option value="2017">2017</option>
  <option value="2018">2018</option>
  <option value="2019">2019</option>
  </select>

  </div>

   <script>
    function filterWrittenCheckboxes() {
      var checkedElements = new Array();
      var checkboxIds = new Array();
      checkboxIds.push("written_checkbox_unchecked_abstraction2");
      checkboxIds.push("written_checkbox_unchecked_representation2");
      checkboxIds.push("yearFilterDropdown2");
      var srcImageName;
      for(var i = 0; i < checkboxIds.length; i++) {
        srcImageName = document.getElementById(checkboxIds[i]).getAttribute("src");
        console.log("srcImageName", srcImageName);
        if (!srcImageName.includes("unchecked")) {
          if (checkboxIds[i].includes("abstraction")) {
            checkedElements.push("abstraction");
          } else if (checkboxIds[i].includes("representation")) {
            checkedElements.push("representation");
          } else if (checkboxIds[i].includes("nature")) {
            checkedElements.push("nature");
          } else if (checkboxIds[i].includes("exhibitions")) {
            checkedElements.push("exhibitions");
          } else if (checkboxIds[i].includes("portraiture")) {
            checkedElements.push("portraiture");
          } else if (srcImageName == "") {
            console.log("srcImageName is empty");
            var dropdown = document.getElementById(checkboxIds[i]);
            console.log("dropdown", dropdown);
            checkedElements.push(dropdown.options[dropdown.selectedIndex].value);
          }
        }
      }

      console.log("checkedElements");
      console.log(checkedElements);
      
      var allImages = makeAllArray(); 
      var photosToDisplay = allImages;
      allImages = shuffleArray(allImages);

      // make the first page not have so many photos so it loads faster
      if(count == 0 && yearFilter == "2017_to_present") {
        allImages = allImages.slice(0, 16);
      }

      photosToDisplay = allImages;

      console.log("about to call make section");
      makeSection("", allImages);

      var allText = getText(checkedElements);
      console.log("done calling allText");
    }

    function flipWrittenCheckmark() {
      console.log("clicked the image textbox");
      console.log("event.target.id", event.target.id);

        var currentImg = $("#" + event.target.id).attr("src");

        console.log(currentImg);

        if (currentImg.includes("unchecked")) {
          currentImg = currentImg.replace("unchecked", "checked");
          console.log(currentImg);
        } else {
          currentImg = currentImg.replace("checked", "unchecked");
          console.log(currentImg);
        }

        $("#" + event.target.id).attr("src", currentImg);
        filterWrittenCheckboxes();
    }

    function temp() {
      console.log("temp function");
    }

    $(document).ready(function () {
      $("#written_checkbox_unchecked_abstraction2").click(flipWrittenCheckmark);
      $("#written_checkbox_unchecked_representation2").click(flipWrittenCheckmark);
      document.getElementById("yearFilterDropdown2").onchange = function() { filterWrittenCheckboxes();};

    })
     

   </script> 

<form id="checkboxForm" action="" method="GET">
  <!-- checkboxes -->
  <div class="filterButton">
    <input type="image" 
    class="written_filter_checkbox" 
    src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png" 
    value="abstraction"
    name="abstraction_checked" 
    alt="abstraction"
    style="visibility: visible;"
    id="written_checkbox_unchecked_abstraction"
    />



    <input 
    type="image"
    class="written_filter_checkbox" 
    src="/Users/montana/Documents/Fun/website/images/written_words/written_words_checked_vectorized.png"
    id="written_checkbox_checked_abstraction"
    style="visibility: hidden; width: 0px;"
    name="abstraction_unchecked"/>
    <img class="written_filter" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_abstraction_vectorized.png"/>

    

    <!-- <label class="filterButtonContainer"> a
    <input type="checkbox" 
    id="abstractionCheckbox"
    name="showType" 
    value="abstraction" 
    class="filterButton"
    onChange="this.form.submit()"
    >
    <span class="checkmark"></span> -->
  </label>
  </div>
  <!-- <div class="filterButton">
    <img  class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png"/>
    <img  class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_checked_vectorized.png"/>
    <img class="written_filter" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_exhibitions_vectorized.png"/>
    <input type="checkbox" 
    id="exhibitionsCheckbox"
    name="showType" 
    value="exhibitions" 
    class="filterButton"
    onChange="this.form.submit()"
    > e<br>
  </div>
  <div class="filterButton">
    <img class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png"/>
    <img hidden="true" class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_checked_vectorized.png"/>
    <img class="written_filter" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_nature_vectorized.png"/>
    <input type="checkbox"
    id="natureCheckbox" 
    name="showType" 
    value="nature" 
    class="filterButton"
    onChange="this.form.submit()"> n<br>
  </div>
  <div class="filterButton">
    <img class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png"/>
    <img hidden="true" class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_checked_vectorized.png"/>
    <img class="written_filter" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_portraiture_vectorized.png"/>
    <input type="checkbox"
    id="portraitureCheckbox" 
    name="showType" 
    value="portraiture" 
    class="filterButton"
    onChange="this.form.submit()"
    > p<br>
  </div>
  <div class="filterButton">
    <img class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_unchecked_vectorized.png"/>
    <img hidden="true" class="written_filter_checkbox" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_checked_vectorized.png"/>
    <img class="written_filter" src="/Users/montana/Documents/Fun/website/images/written_words/written_words_representation_vectorized.png"/>
    <input type="checkbox" 
    id="representationCheckbox"
    name="showType" 
    value="representation" 
    class="filterButton"
    onChange="this.form.submit()"
    > r<br> -->
  </div>

  <!-- filter by year -->
  <select name="yearFilter" id="yearFilterDropdown" onChange="this.form.submit()" form="checkboxForm">
  <option value="2017_to_present">2017 to present</option>
  <option value="2017">2017</option>
  <option value="2018">2018</option>
  <option value="2019">2019</option>
  </select>

  <!-- about -->
  <div class="filterButton"> 
    <a href="about.html">about</a>
  </div>

  <div class="filterButton"> 
    <a href="https://mw20.museweb.net/paper/capturing-large-scale-artifacts-via-reflectance-transformation-imaging-with-a-drone/">rti drone project</a>
  </div>


  </form>

  


  <div id="main-content" class="main">
    <div id="sidebar" class="sidebar">
        
    </div>
    <div id="content" class="content">
        <!-- The Modal -->
      <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImg">
        <div id="topLine">
            <div id="title"></div>
            <div id="yearCaption"></div>
        </div>
        <div id="caption">
            <div id="materialsCaption"></div>
            <div id="sizeCaption"></div>
            <div id="locationCaption"></div>
        </div>
        
  </div>



  

<script>

      var checkedElements = new Array();
      var count = 0;

      // new way of getting checked elements
      // need to call this code whenever a checkbox is clicked!
      var checkboxIds = new Array();
      // checkboxIds.append("written_checkbox_unchecked_abstraction2");
      // var srcImageName;
      // for(var i = 0; i < checkboxIds.length; i++) {
      //   srcImageName = document.getElementById(checkboxIds[i]).getAttribute("src");

      //   if (!srcImageName.includes("unchecked")) {
      //     if (checkboxIds[i].includes("abstraction")) {
      //       checkedElements.append("abstraction");
      //     } else if (checkboxIds[i].includes("representation")) {
      //       checkedElements.append("representation");
      //     } else if (checkboxIds[i].includes("nature")) {
      //       checkedElements.append("nature");
      //     } else if (checkboxIds[i].includes("exhibitions")) {
      //       checkedElements.append("exhibitions");
      //     } else if (checkboxIds[i].includes("portraiture")) {
      //       checkedElements.append("portraiture");
      //     }
      //   }
      // }

      console.log("checkedElements");
      console.log(checkedElements);

      // var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
      //     console.log(parseInt(value));
      //     if(parseInt(value) == NaN) {
      //       checkedElements.push(value);
      //     } else {
      //       if (key.includes("_checked.x")) {
      //         console.log("checked " + key);
      //         checkedElements.push(key.replace("_checked.x", ""));
      //         document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("visibility", "hidden");
      //         document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("width", "0px");
      //         document.getElementById("written_checkbox_checked_abstraction").style.setProperty("visibility", "visible");
      //         document.getElementById("written_checkbox_checked_abstraction").style.setProperty("width", "auto");
      //       }
      //     }
          
      //     count++;
      // });

      console.log("count " + count);
      console.log("checkedElements " + checkedElements);
      var yearFilter = "2017_to_present";

      // if count is zero, none were checked so show all
      if(count == 0) {
        checkedElements = ["abstraction", "exhibitions", "nature", "portraiture", "representation", "2017_to_present"];
      } 

      var justYearFilter = count == 1 && checkedElements[0] != "abstraction" && checkedElements[0] != "exhibitions" && checkedElements[0] != "nature" && checkedElements[0] != "portraiture" && checkedElements[0] != "representation";

      // if the year is the only filter, add everything to that filter
      if(justYearFilter) {
        console.log("just year filter");
        var temp = checkedElements[0];
        checkedElements = ["abstraction", "exhibitions", "nature", "portraiture", "representation", temp];
        yearFilter = temp;

      } else if (count != 0) {
        for(i = 0; i < checkedElements.length; i++) {
          // if it isn't a theme element & its a year
          if(checkedElements[i] != "abstraction" && checkedElements[i] != "exhibitions" 
            && checkedElements[i] != "nature" && checkedElements[i] != "portraiture" 
            && checkedElements[i] != "representation") {
            yearFilter = checkedElements[i];
            break;
          }
        }
      }

      console.log("YEAR FILTER +++++++++++ " + yearFilter);
      var allImages = makeAllArray();

      
      var photosToDisplay = allImages;
      allImages = shuffleArray(allImages);
      // allImages = filterNewerForward(allImages);

      // make the first page not have so many photos so it loads faster
      if(count == 0 && yearFilter == "2017_to_present") {
        allImages = allImages.slice(0, 16);
      }

      photosToDisplay = allImages;

      console.log("about to call make section");
      makeSection("", allImages);

      var allText = getText(checkedElements);
      console.log("done calling allText");

      //filterNewerFoward(allImages);

      // console.log(allText);

      
      // console.log("checkedElements " + checkedElements);

      // var photosToDisplay = new Array();

      
      // var tempSectionTitle = ""
      // var tempArray = new Array();
      // console.log("checkedElements.length " + checkedElements.length);
      var index = 0;
      // var i = 0;
       while(index < checkedElements.length) {
      //   console.log("index " + index + " checkedElements[index] " + checkedElements[index]);
      //   tempArray = shuffleArray(makeArray(checkedElements[index]));
      //   photosToDisplay = photosToDisplay.concat(tempArray);
      //   tempSectionTitle += checkedElements[index] + " ";
        console.log("checked elements #" + index + " " + checkedElements[index]);
        if(count > 0 && !justYearFilter) {
          // if the element is a theme not a year filter
          if(checkedElements[index] == "abstraction" || checkedElements[index] == "exhibitions" || checkedElements[index] == "nature" || checkedElements[index] == "portraiture" || checkedElements[index] == "representation") {
              //document.getElementById(checkedElements[index] + "Checkbox").checked = true;
              console.log("setting visibility in checked loop");
              document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("visibility", "hidden");
              document.getElementById("written_checkbox_unchecked_abstraction").style.setProperty("width", "0px");
              document.getElementById("written_checkbox_checked_abstraction").style.setProperty("visibility", "visible");
              document.getElementById("written_checkbox_checked_abstraction").style.setProperty("width", "auto");
              console.log("checked image: ");
              console.log(document.getElementById("written_checkbox_checked_abstraction"));

          } else {
            // year filter

            console.log("year filter!" + checkedElements[index]);
            document.getElementById("yearFilterDropdown").value = checkedElements[index];
          }
        }

        if(justYearFilter) {
          console.log("just year filter!" + checkedElements[index]);
            document.getElementById("yearFilterDropdown").value = checkedElements[index];
        }
         index++;
        
       }

      // photosToDisplay = shuffleArray(photosToDisplay);

      // // make the first page not have so many photos so it loads faster
      // if(count == 0) {
      //   photosToDisplay = photosToDisplay.slice(0, photosToDisplay.length / 6);
      // }

      // makeSection(tempSectionTitle, photosToDisplay);


      // Get the modal
      var modal = document.getElementById("myModal");

      // Get the image and insert it inside the modal - use its "alt" text as a caption
      var modalImg = document.getElementById("modalImg");
      var title = document.getElementById("title");
      var captionText = document.getElementById("caption");
      var yearCaption = document.getElementById("yearCaption");
      var materialsCaption = document.getElementById("materialsCaption");
      var sizeCaption = document.getElementById("sizeCaption");
      var locationCaption = document.getElementById("locationCaption");

      for(i = 0; i < photosToDisplay.length; i++) {
        var img = document.getElementById(getImageIdFromFilepath(photosToDisplay[i]));
        img.onclick = function(){
          modal.style.display = "block";
          modalImg.src = this.src;
          //captionText.innerHTML = this.alt;
          materialsCaption.innerHTML = this.materials;
          sizeCaption.innerHTML = this.widthInches + " x " + this.heightInches + " in.";
          locationCaption.innerHTML = this.location;
          title.innerHTML = this.title;
          yearCaption.innerHTML = this.year;
          var imageId = getImageIdFromFilepath(this.id);
        }
      }

      
      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];

      // When the user clicks on <span> (x), close the modal
      span.onclick = function() { 
        modal.style.display = "none";
      }

     

  </script>

      </div>
</div>

<!-- <p> top of body </p>
<form id="checkboxForm" action="" method="GET">
  <div class="filterButton">
    <input type="checkbox" 
    id="abstractionCheckbox"
    name="showType" 
    value="abstraction" 
    class="filterButton"
    > abstraction<br>
  </div>

  <div class="filterButton">
    <input type="checkbox" 
    id="exhibitionsCheckbox"
    name="showType" 
    value="exhibitions" 
    class="filterButton"
    > exhibitions<br>
  </div>

  <div class="filterButton">
    <input type="checkbox"
    id="natureCheckbox" 
    name="showType" 
    value="nature" 
    class="filterButton"> nature<br>
  </div>
  <div class="filterButton">
    <input type="checkbox"
    id="portraitureCheckbox" 
    name="showType" 
    value="portraiture" 
    class="filterButton"
    > portraiture<br>
  </div>
  <div class="filterButton">
    <input type="checkbox" 
    id="representationCheckbox"
    name="showType" 
    value="representation" 
    class="filterButton"
    > representation<br>
  </div>
  <input type="submit" value="Submit">
  </form> -->





</body>

</html>